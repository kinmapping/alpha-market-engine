---
name: ""
overview: ""
todos: []
---

# 共有エンティティ前提の段階的実装プラン

## スコープ

- Python側の strategy-module / execution を、`shared/domain/models/` でエンティティを共有する構成に移行・実装する。
- 既存ドキュメントの方針に沿って、コードと設定を段階的に整備する。

## フェーズ

1) 基盤/共有モデル整備（Phase 1）

- `shared/domain/models/` に OHLCV/Signal/Order/Execution/Position を定義
- mypy/型チェック用の`__init__.py`整備
- 共有モデルをビルドに含めるよう `PYTHONPATH`/パス解決を方針化

2) Strategy-module 実装（Phase 2）

- 共有モデルを参照するよう import を置換
- Redis Consumer/Publisher・OHLCV生成・指標計算・シグナル生成の実装/整備
- Dockerfile で shared を COPY or volume mount、`PYTHONPATH` 設定

3) execution 実装（Phase 3）

- 共有モデルを参照するよう import を置換
- Redis Consumer/注文実行/リスク管理/ポジション管理/約定監視を実装
- Dockerfile で shared を COPY or volume mount、`PYTHONPATH` 設定

4) テスト/検証（Phase 4）

- ユニット/統合テスト追加（strategy: シグナル生成、execution: リスク判定・注文生成）
- `docker-compose.local.yml` で shared 取り込みを確認
- lint/format/type-check 実行

5) ドキュメント更新（Phase 5）

- `docs/architecture/01_architecture.md` に HTTP オプション方針（無し/Starlette/FastAPI、ENABLE_HTTP スイッチ、エンドポイント最小セット）を追記
- `docs/architecture/03_strategy.md` と `docs/architecture/04_execution.md` に同方針を反映し、各モジュール視点での後付け手順と環境変数例を整理

## 成果物

- shared 配下のモデル定義と各モジュールの import 移行
- strategy/execution の Dockerfile・設定更新
- テスト追加と動作確認ログ